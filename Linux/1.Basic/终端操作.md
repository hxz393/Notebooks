# 终端操作

## 常用组合快捷键

在终端中常用的快捷键如下:

| 快捷键           | 说明                                  |
| ---------------- | ------------------------------------- |
| [Tab]            | 命令补全/文件名补齐                   |
| [Ctrl]+C         | 中断操作,停止程序运行                 |
| [Ctrl]+D         | 键盘输入结束/退出终端/删除光标后字符  |
| [Ctrl]+Z         | 暂停当前进程并丢入后台                |
| [Ctrl]+S         | 暂停当前程序,暂停后按下任意键恢复运行 |
| [Ctrl]+A         | 将光标移动到命令行首                  |
| [Ctrl]+E         | 将光标移动到命令行尾                  |
| [Ctrl]+L         | 清屏                                  |
| [Ctrl]+[Shift]+N | 新建终端窗口                          |



## 命令提示符

成功登录系统后显示如下:

`[root@101c7 ~]# `

| 字段  | 说明                                        |
| ----- | ------------------------------------------- |
| root  | 标识登录的用户                              |
| 101c7 | 后面主机名                                  |
| ~     | 当前处于的目录,~表示当前用户目录,它是个变量 |
| #     | 表示登录用户为root,如果是普通用户用$表示    |



## 命令格式

一般命令格式如下,中括号[]表示非必须输入:

`command [-options] [parameter1] [parameter2]... `

### command

命令名称,一行命令第一个输入的部分绝对是命令或可执行文件.

命令太长时可以使用反斜杠 \ 来转义回车(必须立刻接特殊字符才能转义),使命令连续到下一行.

命令严格区分大小写,通常由小写字母构成.

### options

选项前通常会加 - 号.例如-h.

有时表示输入选项完整全名,则使用 -- 符号.例如--help.

多个选项可用一个-连起来.

### parameter

为依附在选项后面的参数,或是命令的参数.

通常参数是一些文件名,告诉命令从哪里可以得到输入,以及把输出送到什么地方.

参数之间用空格隔开,多个空格会被视为一个空格.



## 执行命令

在命令行执行命令时,有两种情况:

- 按下回车键后命令立即运行,直接显示结果,等待下一条命令输入.
- 进入到该命令的环境,直到结束该命令才回到命令提示符的环境.

命令在正常执行后返回一个0值,表示执行成功;如果命令执行过程中出错没有完成全部工作,则返回一个非零值(可用变量`$?`查看).

### 命令执行顺序

按优先级排列:

1. 以相对/绝对路径执行命令,例如/bin/ls或ls;
2. 由alias找到该命令来执行;
3. 由bash内置的(builtin)命令来执行;
4. 通过$PATH这个变量的顺序找到的第一个命令来执行.

### 执行多条命令

用分号**;**隔开命令可以将多条命令写在一行,命令会依次运行.

例如查看root.txt文件属性后,修改权限为6755,再次root.txt的属性:

```shell
[root@101c7 ~]# ll root.txt ; chmod 6775 root.txt ; ll root.txt 
-rw-r--r--. 1 root root 7549 Sep 11 11:59 root.txt
-rwsrwsr-x. 1 root root 7549 Sep 11 11:59 root.txt
```

### 报错信息

如下面两条报错信息:

```shell
[user1@101c7 root]$ cat nohup.out ; catt
cat: nohup.out: Permission denied
bash: catt: command not found
```

用冒号:分隔成三段分别表示:命令,参数,报错原因.



## 命令别名

使用命令alias可以设置命令别名.例如将命令ll -a | more 设置为lm:

```sh
[root@101c7 ~]# alias lm='ll -a | more'
```

查询已定义的别名,可以使用-p参数:

```sh
[root@101c7 ~]# alias -p
alias cp='cp -i'
alias egrep='egrep --color=auto'
```

取消别名用unalias命令:

```sh
[root@101c7 ~]# unalias lm
```



## 历史命令

使用快捷键Ctrl+r可以搜索历史命令记录,搜索结果继续按Ctrl+r显示上一个找到的命令:

```sh
(reverse-i-search)`history': history | grep dump
```

可以通过history命令查询输入过的历史命令列表.

默认历史命令保存在~/.bash_history中,只有注销登录后此次会话所执行的命令才会写入到文件内.

可用参数:

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -c   | 清除所有记录                                                 |
| -d   | 删除指定编号的命令记录                                       |
| -a   | 插入当前历史记录到指定文件末尾,默认会将此次会话的历史记录写入.bash_history文件. |
| -w   | 写入当前的历史记录到指定文件                                 |

例如显示最近5条历史记录:

```sh
[root@101c7 ~]# history 5
  888  date
  889  time
  890  w -i
  891  cat .bash_history 
  892  history | tail -n5
```

可以通过 *!记录编号* 来直接执行对应命令,例如重新运行第890号记录:

```sh
[root@101c7 ~]# !890
w -i
23:41:23 up 1 day,  8:32,  2 users,  load average: 0.00, 0.01, 0.05
USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     pts/0    192.168.2.101    04:01    3.00s  0.84s  0.00s w -i
root     pts/1    192.168.2.101    15:12    8:28m  0.01s  0.01s -bash
```

如果是!!表示执行上一个命令.



## 清屏

直接输入clear命令能清屏:

```sh
[root@101c7 ~]# clear
```



