# 基础概念

## 计算机简介

### **计算机定义**

拥有输入和输出设备,通过输入设备接受用户输入,经中央处理器的数学与逻辑单元处理后,生成或储存成有用信息的机器.



### **计算机组成**

计算机由五大部分组成,分别是:输入单元,输出单元,CPU内部的控制单元,算术逻辑单元,内存.



### **计算机分类**

按用途可以分为以下几类:

- **超级计算机**(Supercomputer)

  最快也最贵,用于需要高速计算的项目中,例如军事,气象,太空,模拟等.

- **大型计算机**(Mainframe Computer):

  用于处理大数据和复杂运算,一般见于证券,银行,大型企业数据库服务器等.

- **迷你计算机**(Minicomputer)

  低配版的大型计算机,对于场所环境要求没那么严格,一般用在科研,工程分析,工厂等地.

- **工作站**(Workstation)

  针对特殊用途设计的计算机,比如图形工作站,机器学习等,比起PC来说强调稳定性.

- **微电脑**(Microcomputer)

  又叫个人计算机,PC.也分移动和桌面型电脑等.

## CPU

### **中央处理器定义**

中央处理器(CPU,Central Processing Unit)是一个具有特定功能的芯片,里头含有微指令集.是计算机最重要的组成部分.



### **CPU组成单元**

- **算术逻辑单元**

  负责运算与逻辑运算.

- **控制单元**

  协调各周边元间与各单元间的工作.



### **CPU指令集**

按照指令集设计理念分为精简指令集和复杂指令集:

- **精简指令集**(RISC,Reduced Instruction Set Computing)

  微指令集较为精简,每个指令的执行时间都很短,完成的动作单一,执行性能好.

  常见的RISC CPU有Sun公司的SPARC系列(用于学术,银行大型工作站),IBM公司的Power Architecture(包括	PowerPC,例如索尼PS游戏机),ARM系列(手机,网络设备)

- **复杂指令集**(CISC,Complex Instruction Set Computer)

  每个小指令可以执行一些较低阶的硬件操作,指令数目多而复杂,每条指令的长度不同.执行时间较长,但每个指	令可以处理的工作较为丰富.

  常见的CISC CPU有AMD和Intel的x86,x64构架处理器.叫x86因为由最早Intel的元组型号8086发展而来,构架	从8位升级到32位,现在普遍使用的是64位CPU,统称为x86_64构架.



### **微指令集**

不同x86构架的CPU区别除了二级缓存大小等硬件参数差异外,微指令也略有所不同.比如Intel处理器就有用于虚拟化(Intel-VT),视频硬解码(MMX,SSE)等独特指令集,可以有效提升针对特定工作的运行效率.



### 多核心

所谓多核心是在一颗CPU封装中嵌入两个以上的运算核心.



### CPU频率

CPU频率就是CPU每秒可以进行的工作次数,频率越高表示这颗CPU单位时间内可以做更多事情.

例如CPU的频率为4.0GHz代表这颗CPU在一秒内可以进行4*10^9^次工作.



### 南北桥

由于Intel和AMD的CPU构架并不兼容,所以主板芯片设计也不同.Intel早期芯片组分北桥和南桥.

- **北桥**

  负责连接速度较快的CPU,内存和显卡等元件.也叫系统总线.

- **南桥**

  负责连接速度较慢的设备接口,包括硬盘,USB,网卡等.也叫输入输出总线.

目前主流构架中,大多将北桥内存控制器整合到CPU封装当中了,这样CPU和设备之间直接通信(QPI,DMI技术),速度更快且不用消耗更多带宽.北桥也不会成为制约CPU频率的瓶颈.



### 32位和64位

与总线宽度相似,CPU每次能处理的数据量称为字组大小(word size),一次数据读取的最大量为32位或64位.

通常说的32位主要是依据CPU解析的字组大小(4个字节)而来.64位代表CPU一次可以读写64bits(8个字节)数据.

因为CPU读取数据量有限,能够从内存中内存中读写的数据也有限制.32位CPU含有32根地址线,寻址能力为232个字节,相当于4GB,所以只能支持到4GB内存大小.



### 外频与倍频

早期CPU构架主要通过北桥来链接CPU,内存与显卡设备,所有设备都要通过北桥来链接,因此每个设备的工作频率要求相同,于是就有了前端总线(FSB, Front Side Bus)这个东西.但因为CPU的运算速度远远超过其他设备,又为了满足FSB的频率,因此就有了所谓的外频和倍频.

- **外频**

  指CPU与外部元间进行数据数据传输时的速度.

- **倍频**

  是CPU内部用来加速工作性能的一个倍数.

CPU频率=外频*倍频



### 超线程

超线程(HT, Hyper-Threading)是在每一个CPU内部将重要的寄存器(register)分为两群,让程序分别使用这两群寄存器.也就是说可以有两个程序同时竞争CPU的运算单元,而非通过操作系统的多任务切换.

通过HT机制,操作系统可以使用实际核心的两倍数量,并且让每个核心逻辑上分离.

在支持多核心运行的程序时,只要运算达不到100%的CPU使用率,超线程确实能帮助提升执行速度,更好地利用CPU性能.



### **多级缓存**

一般CPU拥有二级(L2 Cache)或更多级缓存,由比DRAM速度更快的静态随机访问内存(SRAM, Static Random Access Memory)组成.用于存放一些很常用数据,这样数据不通过内存读取,极高提升了性能.



## 内存

CPU处理的数据来源于内存,而处理完毕的数据也要先写回内存,再从内存传输到输出单元.

内存主要组件为动态随机访问内存(DRAM, Dynamic Random Access Memory),只有通电时才能记录与使用,断电数据消失,因此也叫挥发性内存.



### 内存类型

内存由**SDRAM**发展为**DDR**(Double Data Rate)也就是所谓的双倍数据传送速度SDRAM,它可以在一次工作周期中进行两次数据传送.

例如DDR400的内存,代表数据宽度64bit,外频200MHz,频率400MHz,频宽3.2GB/s



### 内存速度

内存工作频率由CPU内的内存控制器决定,假如内存频率为1600MHz,总线宽度64bit,理论最大传输速度为:
$$
1600MHz*64bit=1600MHz*8Bytes=12800MB/s=12.8GB/s
$$


### 多通道设计

当两条同样的内存插入支持内存双通道的主板中时,总线宽度由64bit升级到128bit,传输速度翻倍.这是双通道内存的设计理念.

除了双通道外,服务器提供三信道甚至四信道的内存环境.



## 主板

主板(main board)有用来沟通所有设备的芯片组,将它们链接起来,提供给CPU使用.



### CMOS芯片

记录主板重要参数,比如系统时间,CPU频率,设备I/O地址等,需要额外电子供电.



### BIOS

BIOS(Basic Input Output System)是使用闪存(Flash Memory)或EEPROM保存开机时执行的程序,程序主要用来加载和修改CMOS当中的参数,并尝试调用储存设备中的开机程序.



### 固件

固件(firmware)是绑定在硬件例如磁盘阵列卡,网卡等上面的控制软件.通常储存在ROM只读储存器(Read Only Memory)中,保证固件安全.



### PCI插槽

主板上的扩展插槽主要有PCI和PCI-E,速度对比表如下:

| 规格      | 宽度(bit) | 速度(MHz) | 频宽 |
| ------------- | --------- | --------- | -------- |
| PCI           | 32        | 33        | 133MB/s  |
| PCI 2.2       | 64        | 66        | 533MB/s  |
| PCI-X         | 64        | 133       | 1064MB/s |
| AGP 4x        | 32t       | 66x4      | 1066MB/s |
| AGP 8x        | 32 bit    | 66x8 MHz  | 2133MB/s |
| PCI-E x1      |           |           | 250MB/s  |
| PCI-E x8      |           |           | 2GB/s    |
| PCI-E 2.0  x8 |           |           | 4GB/s    |
| PCI-E 3.0  x8 |           |           | 8GB/s    |
| PCI-E 4.0  x8 |           |           | 16GB/s   |

 

## 显卡

显卡又称为VGA(Video Graphics Array).负担着图像影像显示的功能.



### 显存

因为每个图像显示的颜色会占用内存,因此显卡上有一个内存的容量,简称显存.



### GPU

此外显卡上还有一个3D加速芯片,专门进行3D运算,简称GPU.



### 显卡插槽

由于显卡需要传输大量数据,因此使用能提供大量带宽的PCI-E插槽.



### 显卡接口

常见显卡上用来连接显示器的接口如下:

- **D-Sub(VGA)**:为较早之前的连接接口,主要为15针的连接,为模拟讯号传输.
- **DVI**:比较常见的有提供数字传输的DVI-D与整合数字和模拟传输的DVI-I.
- **HDMI**:可以同时传输图像和声音.
- **DP(Display port)**:与HDMI相似. 

