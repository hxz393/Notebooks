# 网站服务

## Apache

Apache是使用率最高的开源Web服务器软件.

### 下载

官方提供的Apache镜像不带PHP环境,只能运行静态HTML文件:

```sh
[root@server4 ~]# docker search --filter=is-official=true apache
NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
httpd     The Apache HTTP Server Project                  3737      [OK] 
[root@server4 ~]# docker pull httpd
```

### 配置

httpd服务中主要使用的目录如下:

| 路径                       | 说明               |
| -------------------------- | ------------------ |
| /usr/local/apache2/cgi-bin | 动态网页数据存放处 |
| /usr/local/apache2/conf    | 配置文件目录       |
| /usr/local/apache2/htdocs  | 静态网页数据存放处 |

httpd服务使用的端口如下:

| 端口 | 说明      |
| ---- | --------- |
| 80   | http端口  |
| 443  | https端口 |

启动一个随机httpd容器,将要挂载目录复制出来:

```sh
[root@server4 ~]# docker run -d httpd
c8ba888b67fe1db1ca1e48d18d9d985
[root@server4 ~]# mkdir -p /docker/httpd
[root@server4 ~]# docker cp c8ba888b:/usr/local/apache2/cgi-bin /docker/httpd/cgi-bin
[root@server4 ~]# docker cp c8ba888b:/usr/local/apache2/conf /docker/httpd/conf
[root@server4 ~]# docker cp c8ba888b:/usr/local/apache2/htdocs /docker/httpd/htdocs
[root@server4 ~]# docker rm -f c8ba888b67f
```

### 启动

修改好配置文件后挂载目录和映射端口启动:

```sh
[root@server4 ~]# docker run -d --name httpd -p 80:80 -p 443:443 -v /usr/local/apache2/cgi-bin:/docker/httpd/cgi-bin -v /usr/local/apache2/conf:/docker/httpd/conf -v /usr/local/apache2/htdocs:/docker/httpd/htdocs httpd
9f3e1979ef2af86695e92490b9134af465919baf064dd843b7d78a34955ae194
[root@server4 ~]# docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS                                                                      NAMES
9f3e1979ef2a   httpd          "httpd-foreground"       About a minute ago   Up About a minute   0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:443->443/tcp, :::443->443/tcp   httpd
```



## Nginx

